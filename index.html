<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EI</title>
    <script src="funciones.js"></script>
    <script type="text/javascript">
        function almacenar_datos() {
            // Almacenamos los datos
            a_nombre[indice] = nombre
            a_tipo_trabajador[indice] = tipo_trabajador
            a_sueldo[indice] = sueldo
            a_bonificacion[indice] = bonificacion
            a_seguro_essalud[indice] = seguro_essalud
            a_seguro_vida[indice] = seguro_vida
            a_pago_total[indice] = pago_total
        }
        function mostrar_datos() {
            // Creamos el reporte final
            document.write("----------------------------------------------------------------------------------------------"+"<br>")
            document.write(" TRABAJADOR      TIPO        BASICO        BONIF.        ESSALUD          SEG.VIDA        TOTAL   "+"<br>")
            document.write("----------------------------------------------------------------------------------------------"+"<br>")
            for(indice=0;indice <= a_bonificacion.length-1; indice++) {
                document.write(a_nombre[indice] + " - " + a_tipo_trabajador[indice] + " - " + a_sueldo[indice] + " - " + a_bonificacion[indice] + " - " + a_seguro_essalud[indice] + " - " + a_seguro_vida[indice] + " - " + a_pago_total[indice]+"<br>")
            }
            document.write("----------------------------------------------------------------------------------------------"+"<br>")
            document.write("Totales:                "+ total_sueldo + " - " + total_bonificacion + " - " + total_seg_essalud + " - " + total_seg_vida + " - " + total_cantidad  + "<br>")
            document.write("<br>")
            document.write("Total de Obreros: " + total_obreros + "<br>")
            document.write("Total de Empleados: " + total_empleados)
        }


    </script>
</head>
<body>
    <script type="text/javascript">

        // 1. Datos de entrada
        let nombre, bonificacion, seguro_essalud, seguro_vida, tipo_trabajador, pago_total
        // Colocamos un valor principal a la cantidad
        let total_sueldo = 0 
        let total_bonificacion = 0 
        let total_seg_essalud = 0
        let total_seg_vida = 0
        let total_cantidad = 0
        let horas_trabajadas, tarifa_trabajada, sueldo
        let indice
        let salida = "S"
        // Almaceno los datos en un array para mostrarlos despues
        let a_nombre = new Array()
        let a_tipo_trabajador = new Array()
        let a_sueldo = new Array()
        let a_bonificacion = new Array()
        let a_seguro_essalud = new Array()
        let a_seguro_vida = new Array()
        let a_pago_total = new Array()
        // Colocamos un valor principal al conteo
        let total_obreros = 0
        let total_empleados = 0

        // Proceso repetitivo
        indice = 0
        // 2. Proceso
        // Usamos dowhile para mostrar el reporte al salir
        do {
            // Llamamos a las funciones
            registrar_datos()
            // Usamos if para separar los datos de enmpleados y obreros
            if (tipo_trabajador == 'O') {
                horas_trabajadas = parseInt(prompt("Ingresar las horas trabajadas:"))
                tarifa_trabajada = parseFloat(prompt("Ingresar la tarifa por hora:"))
                sueldo = horas_trabajadas * tarifa_trabajada
                // Contamos los obreros con la variable total_obreros
                total_obreros++
            }
            else if (tipo_trabajador == 'E'){
                sueldo = parseFloat(prompt("Ingrese el pago por quincena:"))
                // Contamos los obreros con la variable total_empleados
                total_empleados++
            }
            calcular_datos()
            // Acumula las cantidades
            total_sueldo += sueldo
            total_bonificacion += bonificacion
            total_seg_essalud += seguro_essalud
            total_seg_vida += seguro_vida
            total_cantidad += pago_total

            // Guardo los datos acumulados y registrados con la función llamada
            almacenar_datos()
            indice++
            // Limito los errores para el buen funcionamiento del codigo con dowhile
            do {
                salida = prompt("¿Desea continuar? Si:(S) o No:(N)")
                // Corregimos las minusculas
                salida = salida.toUpperCase()
                if (salida != 'S' && salida != 'N') {
                    alert("ERROR - elija de las opciones mostradas")
                }
            } while (salida != 'S' && salida != 'N');
        } while (salida != 'N');
        // 3. Datos de salida
        // Llamamos a la funcion para mostrar los datos
        mostrar_datos()
        
    </script>
</body>
</html>